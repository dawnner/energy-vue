{"remainingRequest":"C:\\Users\\zhuhongxing\\Desktop\\dian\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zhuhongxing\\Desktop\\dian\\src\\views\\WebMap\\map.vue?vue&type=style&index=0&id=71ec6122&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\zhuhongxing\\Desktop\\dian\\src\\views\\WebMap\\map.vue","mtime":1685005222843},{"path":"C:\\Users\\zhuhongxing\\Desktop\\dian\\node_modules\\css-loader\\dist\\cjs.js","mtime":1636699560000},{"path":"C:\\Users\\zhuhongxing\\Desktop\\dian\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636699682000},{"path":"C:\\Users\\zhuhongxing\\Desktop\\dian\\node_modules\\postcss-loader\\src\\index.js","mtime":1636699632000},{"path":"C:\\Users\\zhuhongxing\\Desktop\\dian\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1636699664000},{"path":"C:\\Users\\zhuhongxing\\Desktop\\dian\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636699538000},{"path":"C:\\Users\\zhuhongxing\\Desktop\\dian\\node_modules\\vue-loader\\lib\\index.js","mtime":1636699682000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoubWFwIHsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogNTUwcHg7DQp9DQoubWVzc2FnZSB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiA1M3B4Ow0KICBoZWlnaHQ6IDQwMHB4Ow0KICB3aWR0aDogMjAwcHg7DQogIGJhY2tncm91bmQ6ICNmZmY7DQogIG92ZXJmbG93OiBhdXRvOw0KICBjb2xvcjogIzAwNzdjYTsNCiAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogIGN1cnNvcjogcG9pbnRlcjsNCn0NCi5jb250YWluZXIgew0KICBoZWlnaHQ6IDIwMHB4Ow0KICB3aWR0aDogMjAwcHg7DQogIG92ZXJmbG93OiBhdXRvOw0KICBzcGFuIHsNCiAgICBmb250LXdlaWdodDogNjAwOw0KICB9DQp9DQo="},{"version":3,"sources":["map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"map.vue","sourceRoot":"src/views/WebMap","sourcesContent":["<template>\r\n  <baidu-map\r\n    class=\"map\"\r\n    center=\"山东\"\r\n    ak=\"YOUR_APP_KEY\"\r\n    @ready=\"getMap2\"\r\n    :zoom=\"10\"\r\n    :scroll-wheel-zoom=\"true\"\r\n  >\r\n    <div class=\"message\">\r\n      <h5\r\n        v-for=\"(item, index) in mapMessage\"\r\n        :value=\"item.name\"\r\n        :key=\"item.name\"\r\n        @click=\"getBaiduMapPoint(item, index)\"\r\n        :class=\"{ active: index === current }\"\r\n      >\r\n        {{ item.name }}\r\n      </h5>\r\n    </div>\r\n    <bm-control>\r\n      <button @click=\"openDistanceTool\">开启测距</button>\r\n    </bm-control>\r\n    <div style=\"position:absolute;top: 0px;left: 84px\">\r\n      <bm-auto-complete v-model=\"searchJingwei\" :sugStyle=\"{ zIndex: 999999 }\">\r\n        <el-input\r\n          v-model=\"searchJingwei\"\r\n          style=\"width:300px;margin-right:15px\"\r\n          placeholder=\"输入地址\"\r\n          clearable\r\n        ></el-input>\r\n      </bm-auto-complete>\r\n      <el-button type=\"primary\" @click=\"getBaiduMapPoint\">搜索</el-button>\r\n    </div>\r\n    <bm-marker\r\n      v-for=\"(item, index) in mapMessage\"\r\n      :position=\"{ lng: item.Longitude, lat: item.Latitude }\"\r\n      :key=\"item.name\"\r\n      @click=\"getBaiduMapPoint(item, index)\"\r\n    >\r\n      <bm-label\r\n        :content=\"item.name\"\r\n        :title=\"corporateName\"\r\n        labelStyle=\"{color: '#2b4391', border: 'none', boxShadow: '0 0 0 1px #2b4391', fontSize : '14px', borderRadius: '15px',}\"\r\n        :offset=\"{ width: -35, height: 30 }\"\r\n      />\r\n    </bm-marker>\r\n    <bm-info-window\r\n      :position=\"{ lng: Longitude, lat: Latitude }\"\r\n      :show=\"infoWindowShow\"\r\n      @clickclose=\"infoWindowClose\"\r\n      @open=\"infoWindowOpen\"\r\n    >\r\n      <div class=\"container\">\r\n        <span>{{ corporateName }}</span>\r\n        <p>地区:{{ area }}</p>\r\n        <p>行业:{{ industry }}</p>\r\n        <p>所在市区:{{ city }}</p>\r\n      </div>\r\n    </bm-info-window>\r\n    <bm-boundary\r\n      name=\"山东省\"\r\n      :strokeWeight=\"2\"\r\n      strokeColor=\"blue\"\r\n      :fillOpacity=\"0.001\"\r\n    ></bm-boundary>\r\n    <bm-geolocation\r\n      anchor=\"BMAP_ANCHOR_BOTTOM_RIGHT\"\r\n      :showAddressBar=\"true\"\r\n      :autoLocation=\"true\"\r\n    ></bm-geolocation>\r\n    <bm-navigation anchor=\"BMAP_ANCHOR_TOP_RIGHT\"></bm-navigation>\r\n  </baidu-map>\r\n</template>\r\n\r\n<script>\r\n// 写在自己需要用到的组件中src\\views\\system\\user\\profile\\map.vue\r\nimport mapJson from \"../WebMap/map.json\";\r\nimport BaiduMap from \"vue-baidu-map/components/map/Map.vue\";\r\nimport DistanceTool from \"bmaplib.distancetool\";\r\n\r\nexport default {\r\n  components: {\r\n    BaiduMap,\r\n    DistanceTool\r\n  },\r\n  data() {\r\n    return {\r\n      mapMessage: mapJson,\r\n      searchJingwei: \"\",\r\n      corporateName: \"\",\r\n      current: 0,\r\n      infoWindowShow: false,\r\n      Longitude: \"\",\r\n      Latitude: \"\",\r\n      area: \"\",\r\n      city: \"\",\r\n      industry: \"\",\r\n      point: \"\",\r\n      BMap: null, // 百度地图对象\r\n      map: null // 百度地图实例\r\n    };\r\n  },\r\n  mounted() {\r\n    // this.corporateName = this.mapMessage.map(item => {\r\n    //   return item.name\r\n    // })\r\n    // console.log(this.corporateName)\r\n    // for (let i= 0; i<this.mapMessage.length; i++) {\r\n    //   this.corporateName = this.mapMessage[i].name\r\n    //   console.log(this.corporateName)\r\n    // }\r\n  },\r\n  unmount() {\r\n    distanceTool && distanceTool.close();\r\n  },\r\n  methods: {\r\n    getBaiduMapPoint(item, i) {\r\n      if (item) {\r\n        console.log(item);\r\n        let that = this;\r\n        that.current = i;\r\n        this.corporateName = item.name;\r\n        that.area = item.City;\r\n        this.city = item.County;\r\n        that.industry = item.type;\r\n        let str = item.name ? item.name : this.searchJingwei;\r\n        let myGeo = new this.BMap.Geocoder();\r\n        myGeo.getPoint(str, function(point) {\r\n          console.log(str);\r\n          if (point) {\r\n            console.log(point);\r\n            that.map.centerAndZoom(point, 15);\r\n            that.Latitude = item.Latitude;\r\n            that.Longitude = item.Longitude;\r\n            that.infoWindowShow = true;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    // getLocation(e){\r\n    //   console.log(e)\r\n    //   this.Longitude=e.point.lng\r\n    //   this.Latitude=e.point.lat\r\n    //   this.infoWindowShow=true\r\n    // },\r\n    infoWindowClose() {\r\n      this.Latitude = \"\";\r\n      this.Longitude = \"\";\r\n      this.infoWindowShow = false;\r\n    },\r\n    infoWindowOpen() {\r\n      this.infoWindowShow = true;\r\n    },\r\n    // handler: function ({ BMap, map }) {\r\n    // \twindow.map = map\r\n    // \t// 赋值，方便调用，本节被用到\r\n    // \tthis.BMap = BMap\r\n    // \tthis.map = map\r\n    // \t// 测距功能\r\n    // \tthis.distanceTool = new DistanceTool(map, {lineStroke : 2})\r\n    // \t//监听测距尺关闭的时候触发的事件\r\n    // \tthis.distanceTool.addEventListener(\"removepolyline\", function(e) {\r\n    // \t  console.log(\"removepolyline\");\r\n    // \t  console.log(e);\r\n    // \t});\r\n    // \t//监听测距尺鼠标点击添加点的时候触发的事件\r\n    // \tthis.distanceTool.addEventListener(\"addpoint\", function(e) {\r\n    // \t\tconsole.log(\"addpoint\");\r\n    // \t\tconsole.log(e.point);\r\n    // \t\tconsole.log(e.pixel);\r\n    // \t\tconsole.log(e.index);\r\n    // \t\tconsole.log(e.distance);\r\n    // \t});\r\n    // \t//监听测距尺鼠标右击测距尺添加完成的时候触发的事件\r\n    // \tthis.distanceTool.addEventListener('drawend', function(e) {\r\n    // \t\tconsole.log(\"drawend\");\r\n    // \t\tconsole.log(e.points);\r\n    // \t\tconsole.log(e.overlays);\r\n    // \t\tconsole.log(e.distance);\r\n    // \t});\r\n    // },\r\n    getMap2({ BMap, map }) {\r\n      this.point = new BMap.Point(113.27, 23.13);\r\n      map.centerAndZoom(this.point, 12);\r\n      this.BMap = BMap;\r\n      this.map = map;\r\n      // 创建地图实例\r\n      // var map = new BMap.Map('map2');\r\n      // //设置地图的中心点如成都的坐标\r\n      // var point = new BMap.Point(117.02, 36.40);\r\n      // // 初始化地图，设置中心点坐标和地图级别\r\n      // map.centerAndZoom(point, 7);\r\n      // // 将地图在水平位置上移动x像素，垂直位置上移动y像素(x,y)\r\n      // map.panBy(0, 30);\r\n      // // 允许滚轮缩放\r\n      // map.enableScrollWheelZoom();\r\n      // //只显示某个省份的关键代码\r\n      // var cityName = '山东省';\r\n      // var bdary = new BMap.Boundary();\r\n      // bdary.get(cityName, function (rs) {\r\n      //   let arr = rs.boundaries;\r\n      //   if (arr.length == 0) return;\r\n      //   //获取行政区域\r\n      //   var EN_JW = '180, 90;'; //东北角\r\n      //   var NW_JW = '-180,  90;'; //西北角\r\n      //   var WS_JW = '-180, -90;'; //西南角\r\n      //   var SE_JW = '180, -90;'; //东南角\r\n      //   let max = arr.reduce((a, b) => (a.length > b.length ? a : b));\r\n      //   //4.添加环形遮罩层\r\n      //   var ply1 = new BMap.Polygon(max + SE_JW + SE_JW + WS_JW + NW_JW + EN_JW + SE_JW, { strokeColor: 'none', fillColor: '#0B1D35', fillOpacity: 1, strokeOpacity: 0.5 }); //建立多边形覆盖物\r\n      //   map.addOverlay(ply1);\r\n      // });\r\n      this.distanceTool = new DistanceTool(map, { lineStroke: 2 });\r\n    },\r\n    openDistanceTool(e) {\r\n      const { distanceTool } = this;\r\n      distanceTool && distanceTool.open();\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.map {\r\n  width: 100%;\r\n  height: 550px;\r\n}\r\n.message {\r\n  position: absolute;\r\n  top: 53px;\r\n  height: 400px;\r\n  width: 200px;\r\n  background: #fff;\r\n  overflow: auto;\r\n  color: #0077ca;\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n}\r\n.container {\r\n  height: 200px;\r\n  width: 200px;\r\n  overflow: auto;\r\n  span {\r\n    font-weight: 600;\r\n  }\r\n}\r\n</style>\r\n"]}]}