{"remainingRequest":"E:\\前端练习\\dian\\node_modules\\babel-loader\\lib\\index.js!E:\\前端练习\\dian\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\前端练习\\dian\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\前端练习\\dian\\src\\views\\monitor\\online\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\前端练习\\dian\\src\\views\\monitor\\online\\index.vue","mtime":1636699498500},{"path":"E:\\前端练习\\dian\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636699536746},{"path":"E:\\前端练习\\dian\\node_modules\\babel-loader\\lib\\index.js","mtime":1636699523817},{"path":"E:\\前端练习\\dian\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636699536746},{"path":"E:\\前端练习\\dian\\node_modules\\vue-loader\\lib\\index.js","mtime":1636699680472}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX29ubGluZSA9IHJlcXVpcmUoIkAvYXBpL21vbml0b3Ivb25saW5lIik7CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogIk9ubGluZSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOihqOagvOaVsOaNrgogICAgICBsaXN0OiBbXSwKICAgICAgcGFnZU51bTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICAvLyDmn6Xor6Llj4LmlbAKICAgICAgcXVlcnlQYXJhbXM6IHsKICAgICAgICBpcGFkZHI6IHVuZGVmaW5lZCwKICAgICAgICB1c2VyTmFtZTogdW5kZWZpbmVkCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKiog5p+l6K+i55m75b2V5pel5b+X5YiX6KGoICovCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgKDAsIF9vbmxpbmUubGlzdCkodGhpcy5xdWVyeVBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5saXN0ID0gcmVzcG9uc2Uucm93czsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVF1ZXJ5OiBmdW5jdGlvbiBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5wYWdlTnVtID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAoKICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8KICAgIHJlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKCiAgICAvKiog5by66YCA5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVGb3JjZUxvZ291dDogZnVuY3Rpb24gaGFuZGxlRm9yY2VMb2dvdXQocm93KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5by66YCA5ZCN56ew5Li6IicgKyByb3cudXNlck5hbWUgKyAnIueahOaVsOaNrumhuT8nLCAi6K2m5ZGKIiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgwLCBfb25saW5lLmZvcmNlTG9nb3V0KShyb3cudG9rZW5JZCk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5nZXRMaXN0KCk7CgogICAgICAgIF90aGlzMi5tc2dTdWNjZXNzKCLlvLrpgIDmiJDlip8iKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;AAuDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAKA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA;AACA,MAAA,OAAA,EAAA,IAFA;AAGA;AACA,MAAA,KAAA,EAAA,CAJA;AAKA;AACA,MAAA,IAAA,EAAA,EANA;AAOA,MAAA,OAAA,EAAA,CAPA;AAQA,MAAA,QAAA,EAAA,EARA;AASA;AACA,MAAA,WAAA,EAAA;AACA,QAAA,MAAA,EAAA,SADA;AAEA,QAAA,QAAA,EAAA;AAFA;AAVA,KAAA;AAeA,GAlBA;AAmBA,EAAA,OAnBA,qBAmBA;AACA,SAAA,OAAA;AACA,GArBA;AAsBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,OAFA,qBAEA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,wBAAA,KAAA,WAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,KAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,OAJA;AAKA,KATA;;AAUA;AACA,IAAA,WAXA,yBAWA;AACA,WAAA,OAAA,GAAA,CAAA;AACA,WAAA,OAAA;AACA,KAdA;;AAeA;AACA,IAAA,UAhBA,wBAgBA;AACA,WAAA,SAAA,CAAA,WAAA;AACA,WAAA,WAAA;AACA,KAnBA;;AAoBA;AACA,IAAA,iBArBA,6BAqBA,GArBA,EAqBA;AAAA;;AACA,WAAA,QAAA,CAAA,eAAA,GAAA,CAAA,QAAA,GAAA,QAAA,EAAA,IAAA,EAAA;AACA,QAAA,iBAAA,EAAA,IADA;AAEA,QAAA,gBAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,YAAA;AACA,eAAA,yBAAA,GAAA,CAAA,OAAA,CAAA;AACA,OANA,EAMA,IANA,CAMA,YAAA;AACA,QAAA,MAAA,CAAA,OAAA;;AACA,QAAA,MAAA,CAAA,UAAA,CAAA,MAAA;AACA,OATA,EASA,KATA,CASA,YAAA,CAAA,CATA;AAUA;AAhCA;AAtBA,C","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"top_search\">\r\n      <div class=\"search_title\">\r\n        <div class=\"line-title\"></div>查询条件\r\n      </div>\r\n      <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\" label-width=\"100px\">\r\n        <el-form-item label=\"登录地址\" prop=\"ipaddr\">\r\n          <el-input v-model=\"queryParams.ipaddr\" placeholder=\"请输入登录地址\" clearable size=\"small\"\r\n            @keyup.enter.native=\"handleQuery\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"用户名称\" prop=\"userName\">\r\n          <el-input v-model=\"queryParams.userName\" placeholder=\"请输入用户名称\" clearable size=\"small\"\r\n            @keyup.enter.native=\"handleQuery\" />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n        </el-form-item>\r\n\r\n      </el-form>\r\n    </div>\r\n    <div class=\"middle_table\">\r\n      <el-table v-loading=\"loading\" :data=\"list.slice((pageNum-1)*pageSize,pageNum*pageSize)\" style=\"width: 100%;\">\r\n        <el-table-column label=\"序号\" type=\"index\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{(pageNum - 1) * pageSize + scope.$index + 1}}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"会话编号\" align=\"center\" prop=\"tokenId\" :show-overflow-tooltip=\"true\" />\r\n        <el-table-column label=\"登录名称\" align=\"center\" prop=\"userName\" :show-overflow-tooltip=\"true\" />\r\n        <el-table-column label=\"部门名称\" align=\"center\" prop=\"deptName\" />\r\n        <el-table-column label=\"主机\" align=\"center\" prop=\"ipaddr\" :show-overflow-tooltip=\"true\" />\r\n        <el-table-column label=\"登录地点\" align=\"center\" prop=\"loginLocation\" :show-overflow-tooltip=\"true\" />\r\n        <el-table-column label=\"浏览器\" align=\"center\" prop=\"browser\" />\r\n        <el-table-column label=\"操作系统\" align=\"center\" prop=\"os\" />\r\n        <el-table-column label=\"登录时间\" align=\"center\" prop=\"loginTime\" width=\"180\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ parseTime(scope.row.loginTime) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleForceLogout(scope.row)\"\r\n              v-hasPermi=\"['monitor:online:forceLogout']\">强退</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"pageNum\" :limit.sync=\"pageSize\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    list,\r\n    forceLogout\r\n  } from \"@/api/monitor/online\";\r\n\r\n  export default {\r\n    name: \"Online\",\r\n    data() {\r\n      return {\r\n        // 遮罩层\r\n        loading: true,\r\n        // 总条数\r\n        total: 0,\r\n        // 表格数据\r\n        list: [],\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        // 查询参数\r\n        queryParams: {\r\n          ipaddr: undefined,\r\n          userName: undefined\r\n        }\r\n      };\r\n    },\r\n    created() {\r\n      this.getList();\r\n    },\r\n    methods: {\r\n      /** 查询登录日志列表 */\r\n      getList() {\r\n        this.loading = true;\r\n        list(this.queryParams).then(response => {\r\n          this.list = response.rows;\r\n          this.total = response.total;\r\n          this.loading = false;\r\n        });\r\n      },\r\n      /** 搜索按钮操作 */\r\n      handleQuery() {\r\n        this.pageNum = 1;\r\n        this.getList();\r\n      },\r\n      /** 重置按钮操作 */\r\n      resetQuery() {\r\n        this.resetForm(\"queryForm\");\r\n        this.handleQuery();\r\n      },\r\n      /** 强退按钮操作 */\r\n      handleForceLogout(row) {\r\n        this.$confirm('是否确认强退名称为\"' + row.userName + '\"的数据项?', \"警告\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\"\r\n        }).then(function() {\r\n          return forceLogout(row.tokenId);\r\n        }).then(() => {\r\n          this.getList();\r\n          this.msgSuccess(\"强退成功\");\r\n        }).catch(() => {});\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style scoped lang=\"scss\">\r\n  .top_search {\r\n    box-shadow: 0 2px 12px 0 rgb(234, 234, 234);\r\n    padding: 30px 0px 5px 0px;\r\n    margin-bottom: 15px;\r\n\r\n    .search_title {\r\n      color: #606266;\r\n      font-size: 15px;\r\n      margin: -15px 0 15px 0;\r\n      border-bottom: 1px dashed #eee;\r\n      padding-bottom: 10px;\r\n      padding-left: 30px;\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n  }\r\n\r\n  .middle_table {\r\n    box-shadow: 0 2px 12px 0 rgb(234, 234, 234);\r\n    padding: 20px 20px 30px 20px;\r\n  }\r\n</style>\n"],"sourceRoot":"src/views/monitor/online"}]}